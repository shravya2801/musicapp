{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\project\\\\MusicAppMERN-master\\\\MusicAppMERN-master\\\\Music\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\project\\\\MusicAppMERN-master\\\\MusicAppMERN-master\\\\Music\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\project\\\\MusicAppMERN-master\\\\MusicAppMERN-master\\\\Music\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\project\\\\MusicAppMERN-master\\\\MusicAppMERN-master\\\\Music\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\project\\\\MusicAppMERN-master\\\\MusicAppMERN-master\\\\Music\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\project\\\\MusicAppMERN-master\\\\MusicAppMERN-master\\\\Music\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\project\\\\MusicAppMERN-master\\\\MusicAppMERN-master\\\\Music\\\\src\\\\components\\\\Recommend\\\\Recommend.js\";\nimport React from 'react'; //import {uid} from 'react-uid';\n\nimport { DescriptionWrapper, Wrapper, ListWrapper, NavItem, Navbar, Container } from './styled';\nimport axios from 'axios';\nimport CoverArt from './CoverArt.js';\nimport keys from '../../keys.js';\n\nvar Recommend = /*#__PURE__*/function (_React$Component) {\n  _inherits(Recommend, _React$Component);\n\n  var _super = _createSuper(Recommend);\n\n  function Recommend() {\n    var _this;\n\n    _classCallCheck(this, Recommend);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      clientID: keys.clientID,\n      clientSecret: keys.clientSecret,\n      access_token: \"\",\n      genres: [],\n      data: {},\n      genresInput: \"\",\n      seed_artists: \"4NHQUGzhtTLFvgF5SZesLK\",\n      seed_tracks: \"0c6xIDDpzE81m2q797ordA\",\n      tracks: [],\n      albums: []\n    };\n    _this.getToken = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var result, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('https://accounts.spotify.com/api/token', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/x-www-form-urlencoded',\n                  'Authorization': \"Basic \" + btoa(_this.state.clientID + ':' + _this.state.clientSecret)\n                },\n                body: 'grant_type=client_credentials'\n              });\n\n            case 2:\n              result = _context.sent;\n              _context.next = 5;\n              return result.json();\n\n            case 5:\n              data = _context.sent;\n              _this.state.access_token = data.access_token;\n              _this.state.data = data;\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this.getGenres = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              axios.get(\"https://api.spotify.com/v1/recommendations/available-genre-seeds\", {\n                headers: {\n                  Authorization: \"Bearer \".concat(_this.state.access_token)\n                }\n              }).then(function (data) {\n                _this.setState({\n                  genres: data.data[\"genres\"]\n                });\n\n                console.log(_this.state.genres);\n              });\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this.onChangeHandler = function (e) {\n      var inputGenres = e.target.value.split(' ').join('%20').split(',').join('%2C');\n\n      _this.setState({\n        genresInput: inputGenres\n      });\n    };\n\n    _this.getRecommendationsHandler = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              axios.get(\"https://api.spotify.com/v1/recommendations?seed_artists=4NHQUGzhtTLFvgF5SZesLK&seed_genres=\".concat(_this.state.genresInput, \"&seed_tracks=0c6xIDDpzE81m2q797ordA&min_energy=0.4&min_popularity=50\"), {\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Authorization': \"Bearer \".concat(_this.state.access_token)\n                }\n              }).then(function (data) {\n                _this.setState({\n                  tracks: data.data.tracks\n                });\n\n                console.log(_this.state.tracks);\n                var newAlbum = [];\n\n                _this.state.tracks.forEach(function (track) {\n                  var temp = {};\n                  temp[\"id\"] = track[\"album\"][\"id\"];\n                  temp[\"total_tracks\"] = track[\"album\"][\"total_tracks\"];\n                  temp[\"name\"] = track[\"album\"][\"name\"];\n                  temp[\"image\"] = track[\"album\"][\"images\"][1][\"url\"];\n                  temp[\"artist_name\"] = track[\"artists\"][0][\"name\"];\n                  newAlbum.push(temp);\n                });\n\n                _this.setState({\n                  albums: newAlbum\n                });\n              }).catch(function (err) {\n                console.log(err);\n              });\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    _this.keyPressHandler = function (e) {\n      if (e.key !== 'Enter') {\n        return;\n      }\n\n      _this.getRecommendationsHandler();\n    };\n\n    _this.gridTemplateColumns = function (w) {\n      switch (true) {\n        case w <= 547:\n          return 'repeat(2, minmax(16px, 218px))';\n\n        case w >= 548 && w <= 771:\n          return 'repeat(3, minmax(146px, 230px))';\n\n        case w >= 772 && w <= 979:\n          return 'repeat(4, minmax(166px, 217px))';\n\n        default:\n          return 'repeat(6, minmax(145px, 230px))';\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Recommend, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getToken();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Navbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(ListWrapper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(NavItem, {\n        to: \"/browse/featured\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 29\n        }\n      }, \"FEATURED\"), /*#__PURE__*/React.createElement(NavItem, {\n        to: \"/browse/newreleases\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 29\n        }\n      }, \"NEW RELEASES\"), /*#__PURE__*/React.createElement(NavItem, {\n        to: \"/search\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 29\n        }\n      }, \"SEARCH\"), /*#__PURE__*/React.createElement(NavItem, {\n        to: \"/recommend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 29\n        }\n      }, \"RECOMMENDATIONS\"))), /*#__PURE__*/React.createElement(Wrapper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        role: \"search\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        ref: function ref(input) {\n          return input && input.focus();\n        },\n        placeholder: \"Pop, Country, Metal, etc.\",\n        className: \"search-bar\",\n        type: \"text\",\n        onChange: function onChange(e) {\n          return _this2.onChangeHandler(e);\n        },\n        onKeyPress: function onKeyPress(e) {\n          return _this2.keyPressHandler(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(DescriptionWrapper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      }, this.state.albums.length ? /*#__PURE__*/React.createElement(Wrapper, {\n        template: this.gridTemplateColumns(100),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }\n      }, this.state.albums.map(function (album, index) {\n        return /*#__PURE__*/React.createElement(CoverArt, {\n          key: \"recommend \".concat(index) //key = {uid(index)}\n          ,\n          playBtn: false,\n          bigTitle: true,\n          temp: album,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 44\n          }\n        });\n      })) : null)));\n    }\n  }]);\n\n  return Recommend;\n}(React.Component);\n\nexport { Recommend as default };","map":{"version":3,"sources":["C:/project/MusicAppMERN-master/MusicAppMERN-master/Music/src/components/Recommend/Recommend.js"],"names":["React","DescriptionWrapper","Wrapper","ListWrapper","NavItem","Navbar","Container","axios","CoverArt","keys","Recommend","state","clientID","clientSecret","access_token","genres","data","genresInput","seed_artists","seed_tracks","tracks","albums","getToken","fetch","method","headers","btoa","body","result","json","getGenres","get","Authorization","then","setState","console","log","onChangeHandler","e","inputGenres","target","value","split","join","getRecommendationsHandler","newAlbum","forEach","track","temp","push","catch","err","keyPressHandler","key","gridTemplateColumns","w","input","focus","length","map","album","index","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n//import {uid} from 'react-uid';\nimport {\n    DescriptionWrapper,\n    Wrapper,\n    ListWrapper,\n    NavItem,\n    Navbar,\n    Container\n  } from './styled';\nimport axios from 'axios';\nimport CoverArt from './CoverArt.js';\nimport keys from '../../keys.js';\n\n\nexport default class Recommend extends React.Component {\n\n    state = {\n        clientID: keys.clientID,\n        clientSecret: keys.clientSecret,\n        access_token: \"\",\n        genres: [],\n        data: {},\n        genresInput: \"\",\n        seed_artists: \"4NHQUGzhtTLFvgF5SZesLK\",\n        seed_tracks: \"0c6xIDDpzE81m2q797ordA\",\n        tracks: [],\n        albums: []\n    }\n    \n    componentDidMount() {\n        this.getToken();\n    }\n    \n    getToken = async () => {\n        const result = await fetch('https://accounts.spotify.com/api/token', \n        {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'Authorization' : `Basic ` + btoa(this.state.clientID + ':' + this.state.clientSecret)\n\n            },\n            body: 'grant_type=client_credentials'\n        });\n        const data = await result.json();\n        this.state.access_token = data.access_token;\n        this.state.data = data;\n    }\n    \n    getGenres = async () => {\n        axios.get(`https://api.spotify.com/v1/recommendations/available-genre-seeds`, \n        {\n            headers: {\n            Authorization: `Bearer ${this.state.access_token}`\n        }})\n        .then ((data) => {\n            this.setState({\n                genres: data.data[\"genres\"]\n            })\n            console.log(this.state.genres);\n        })\n    }\n    \n    onChangeHandler = (e) => {\n        const inputGenres = e.target.value.split(' ').join('%20').split(',').join('%2C');\n        this.setState({\n            genresInput: inputGenres\n        })\n    }\n\n    getRecommendationsHandler = async () => {\n        axios.get(`https://api.spotify.com/v1/recommendations?seed_artists=4NHQUGzhtTLFvgF5SZesLK&seed_genres=${this.state.genresInput}&seed_tracks=0c6xIDDpzE81m2q797ordA&min_energy=0.4&min_popularity=50`,  \n        {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.state.access_token}`,\n            }\n        })\n        .then(data => {\n            this.setState({\n                tracks: data.data.tracks\n            })\n            console.log(this.state.tracks)\n            var newAlbum = [];\n            this.state.tracks.forEach(track => {\n                var temp = {};\n                temp[\"id\"] = track[\"album\"][\"id\"];\n                temp[\"total_tracks\"] = track[\"album\"][\"total_tracks\"];\n                temp[\"name\"] = track[\"album\"][\"name\"];\n                temp[\"image\"] = track[\"album\"][\"images\"][1][\"url\"];\n                temp[\"artist_name\"] = track[\"artists\"][0][\"name\"];\n                newAlbum.push(temp);\n            })\n            this.setState({\n                albums: newAlbum\n            })\n        })\n        .catch(err => {\n            console.log(err);\n        })\n    }\n\n    keyPressHandler = (e) => {\n        if (e.key !== 'Enter') {\n            return;\n        }\n        this.getRecommendationsHandler();\n    }\n    \n    gridTemplateColumns = w => {\n        switch (true) {\n          case w <= 547:\n            return 'repeat(2, minmax(16px, 218px))';\n          case w >= 548 && w <= 771:\n            return 'repeat(3, minmax(146px, 230px))';\n          case w >= 772 && w <= 979:\n            return 'repeat(4, minmax(166px, 217px))';\n          default:\n            return 'repeat(6, minmax(145px, 230px))';\n        }\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <Container>\n                    <Navbar>\n                        <ListWrapper>\n                            <NavItem to=\"/browse/featured\">FEATURED</NavItem>\n                            <NavItem to=\"/browse/newreleases\">NEW RELEASES</NavItem>\n                            <NavItem to=\"/search\">SEARCH</NavItem>\n                            <NavItem to=\"/recommend\">RECOMMENDATIONS</NavItem>\n                        </ListWrapper>\n                    </Navbar>\n                    <Wrapper>\n                        <br/>\n                        <div role = \"search\">\n                        <input \n                            ref={input => input && input.focus()}\n                            placeholder = \"Pop, Country, Metal, etc.\"\n                            className = \"search-bar\" \n                            type=\"text\" \n                            onChange = {(e) => this.onChangeHandler(e)}\n                            onKeyPress = {(e) => this.keyPressHandler(e)}\n                            />\n                        </div>\n                        <br/>\n                    </Wrapper>\n                    <DescriptionWrapper>\n                    {\n                        this.state.albums.length ? \n                        <Wrapper template={this.gridTemplateColumns(100)}>\n                            {\n                                this.state.albums.map((album, index) => {\n                                    return <CoverArt \n                                        key = {`recommend ${\n                                            index\n                                        }`}\n                                        //key = {uid(index)}\n                                        playBtn = {false} \n                                        bigTitle = {true} \n                                        temp = {album} \n                                    />\n                                })\n                            }\n                        </Wrapper> \n                        : null\n                    }\n                    </DescriptionWrapper>\n                </Container>\n            </React.Fragment>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}